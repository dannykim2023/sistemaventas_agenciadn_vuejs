import{d as z,r as n,w as B,a as m,c as b,b as x,u as F,h as I,e as i,f as e,g as w,n as g,i as u,t as l,o as y,j as h,F as U}from"./app-Cu1ZTOfv.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cd2IY5WO.js";import{d as q}from"./index-C4J_hXM0.js";import{C as L}from"./CustomerModal-CquWBU31.js";import{_ as R}from"./BaseTable.vue_vue_type_script_setup_true_lang-CNUQl-u5.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DttlMC7K.js";import"./useForwardExpose-ZxkAgBFE.js";import"./VisuallyHidden-Dnw20B64.js";import"./RovingFocusGroup-BdFS1gzQ.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-BOEA_9Ax.js";const G={class:"p-4 md:p-6 space-y-4"},H={class:"border-b"},J={class:"-mb-px flex gap-6"},K={class:"bg-white dark:bg-card rounded-xl shadow-sm border"},O={class:"flex items-center gap-2"},Q={class:"w-6 h-6 rounded-full bg-primary/10 text-primary grid place-items-center text-xs font-semibold"},W={class:"font-medium"},X={class:"bg-white dark:bg-card w-full max-w-2xl rounded-xl shadow-xl border p-6 space-y-4"},Y={class:"flex items-center justify-between"},Z={class:"grid md:grid-cols-2 gap-3"},ee={class:"font-medium"},te={class:"md:col-span-2"},se={class:"font-medium"},oe={class:"md:col-span-2"},le={class:"md:col-span-2"},re={class:"flex justify-end gap-2 pt-2 border-t mt-2"},ae={class:"bg-white dark:bg-card w-full max-w-md rounded-xl shadow-xl border p-6 space-y-4"},ne={class:"flex justify-end gap-2"},ye=z({__name:"Index",props:{customers:{},filters:{}},setup(_){const a=_;function $(f){C.value=f,k()}const E=[{title:"Dashboard",href:q().url},{title:"Contactos",href:"/customers"}],C=n(a.filters?.search??""),r=n(a.filters?.type??"all");B(r,k);function k(){m.get("/customers",{search:C.value||void 0,type:r.value!=="all"?r.value:void 0},{preserveState:!0,replace:!0})}const N=[{key:"name",label:"Nombre"},{key:"document",label:"Identificación"},{key:"email",label:"Correo"},{key:"phone",label:"Teléfono"}],S=[{key:"view",label:"Ver"},{key:"edit",label:"Editar"},{key:"delete",label:"Eliminar",variant:"danger"}],d=n(!1),c=n("create"),v=n(!1),p=n(!1),o=n(null);function D(){c.value="create",o.value=null,d.value=!0}function V(f){o.value=f,c.value="edit",d.value=!0}function j(){o.value&&m.delete(`/customers/${o.value.id}`,{preserveScroll:!0,onSuccess:()=>{p.value=!1,o.value=null,m.reload({only:["customers"]})}})}function M(){d.value=!1}function P(){d.value=!1,m.reload({only:["customers"]})}function T(){d.value=!1,m.reload({only:["customers"]})}return(f,t)=>(y(),b(U,null,[x(F(I),{title:"Contactos"}),x(A,{breadcrumbs:E},{default:i(()=>[e("div",G,[e("div",{class:"flex items-center justify-between"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-xl font-semibold"},"Contactos"),e("p",{class:"text-sm text-muted-foreground"}," Crea tus clientes, proveedores y demás contactos para asociarlos en tus documentos. ")],-1)),e("button",{class:"px-4 py-2 rounded-lg bg-primary text-white",onClick:D}," + Nuevo contacto ")]),e("div",H,[e("nav",J,[e("button",{class:g(["py-3 border-b-2",r.value==="all"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"]),onClick:t[0]||(t[0]=s=>r.value="all")}," Todos ",2),e("button",{class:g(["py-3 border-b-2",r.value==="client"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"]),onClick:t[1]||(t[1]=s=>r.value="client")}," Clientes ",2),e("button",{class:g(["py-3 border-b-2",r.value==="supplier"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"]),onClick:t[2]||(t[2]=s=>r.value="supplier")}," Proveedores ",2)])]),e("div",K,[x(R,{columns:N,rows:a.customers.data,pagination:{currentPage:a.customers.current_page,lastPage:a.customers.last_page,perPage:a.customers.per_page,total:a.customers.total},actions:S,"search-placeholder":"Buscar por clientes",onFilter:$},{"cell-name":i(({row:s})=>[e("div",O,[e("div",Q,l((s.name||"C").substring(0,1).toUpperCase()),1),e("span",W,l(s.name),1)])]),"cell-document":i(({row:s})=>[u(l(s.document_type)+" "+l(s.document_number||"—"),1)]),"cell-email":i(({row:s})=>[u(l(s.email||"—"),1)]),"cell-phone":i(({row:s})=>[u(l(s.phone||"—"),1)]),default:i(()=>[t[10]||(t[10]=u(" > ",-1))]),_:1},8,["rows","pagination"])])]),x(L,{open:d.value,mode:c.value,customer:c.value==="edit"?o.value:null,onClose:M,onSaved:P,onUpdated:T},null,8,["open","mode","customer"]),v.value?(y(),b("div",{key:0,class:"fixed inset-0 bg-black/30 grid place-items-center z-50",onClick:t[6]||(t[6]=h(s=>v.value=!1,["self"]))},[e("div",X,[e("div",Y,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold"},"Detalle del contacto",-1)),e("button",{class:"opacity-70 hover:opacity-100",onClick:t[3]||(t[3]=s=>v.value=!1)}," ✕ ")]),e("div",Z,[e("div",null,[t[12]||(t[12]=e("div",{class:"text-xs text-muted-foreground"},"Tipo",-1)),e("div",ee,l(o.value?.type==="company"?"Empresa":"Persona"),1)]),e("div",null,[t[13]||(t[13]=e("div",{class:"text-xs text-muted-foreground"},"Identificación",-1)),e("div",null,l(o.value?.document_type)+" "+l(o.value?.document_number||"—"),1)]),e("div",te,[t[14]||(t[14]=e("div",{class:"text-xs text-muted-foreground"}," Razón social / Nombre ",-1)),e("div",se,l(o.value?.name),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"text-xs text-muted-foreground"},"Correo",-1)),e("div",null,l(o.value?.email||"—"),1)]),e("div",null,[t[16]||(t[16]=e("div",{class:"text-xs text-muted-foreground"},"Teléfono",-1)),e("div",null,l(o.value?.phone||"—"),1)]),e("div",oe,[t[17]||(t[17]=e("div",{class:"text-xs text-muted-foreground"},"Dirección",-1)),e("div",null,l(o.value?.address||"—"),1)]),e("div",le,[t[18]||(t[18]=e("div",{class:"text-xs text-muted-foreground"},"Notas",-1)),e("div",null,l(o.value?.notes||"—"),1)]),e("div",null,[t[19]||(t[19]=e("div",{class:"text-xs text-muted-foreground"},"Estado",-1)),e("div",null,l(o.value?.is_active?"Activo":"Inactivo"),1)])]),e("div",re,[e("button",{class:"px-3 py-2 rounded border",onClick:t[4]||(t[4]=s=>v.value=!1)}," Cerrar "),e("button",{class:"px-3 py-2 rounded border",onClick:t[5]||(t[5]=s=>V(o.value))}," Editar ")])])])):w("",!0),p.value?(y(),b("div",{key:1,class:"fixed inset-0 bg-black/40 grid place-items-center z-50",onClick:t[8]||(t[8]=h(s=>p.value=!1,["self"]))},[e("div",ae,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold"},"Eliminar contacto",-1)),e("p",null,[t[20]||(t[20]=u(" ¿Seguro que deseas eliminar ",-1)),e("b",null,l(o.value?.name),1),t[21]||(t[21]=u("? Esta acción no se puede deshacer. ",-1))]),e("div",ne,[e("button",{class:"px-3 py-2 rounded border",onClick:t[7]||(t[7]=s=>p.value=!1)}," Cancelar "),e("button",{class:"px-4 py-2 rounded bg-red-600 text-white",onClick:j}," Eliminar ")])])])):w("",!0)]),_:1})],64))}});export{ye as default};
