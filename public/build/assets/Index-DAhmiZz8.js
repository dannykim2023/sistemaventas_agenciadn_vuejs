import{d as k,r as P,c as i,b as c,u as f,h as C,e as n,f as a,a as l,i as d,t as r,o as m,F}from"./app-CZGxpMu4.js";import{_ as w}from"./AppLayout.vue_vue_type_script_setup_true_lang-fsc1CXWY.js";import{_ as N}from"./BaseTable.vue_vue_type_script_setup_true_lang-Cp6dmSHz.js";import{d as S}from"./index-C4J_hXM0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-59Mo48T7.js";import"./useForwardExpose-C9xLoNo1.js";import"./VisuallyHidden-CyaeyaAO.js";import"./RovingFocusGroup-Dongv5Iv.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-BIN8wtFf.js";const V={class:"p-4 md:p-6 space-y-4"},$={class:"flex items-center justify-between"},B={class:"bg-white rounded-xl shadow-sm border"},E={key:0},I={key:1,class:"text-xs text-muted-foreground"},A={class:"font-medium"},J=k({__name:"Index",props:{payments:{},filters:{}},setup(g){const o=g,y=[{title:"Dashboard",href:S().url},{title:"Pagos / Ingresos",href:"/payments"}],p=P(o.filters?.search??""),_=[{key:"date",label:"Fecha"},{key:"customer",label:"Contacto / Cliente"},{key:"sale",label:"Venta asociada"},{key:"amount",label:"Valor"},{key:"method",label:"Método"}],h=[{key:"edit",label:"Editar",variant:"normal"},{key:"delete",label:"Eliminar",variant:"danger"}];function u(t){l.get("/payments",{page:t??void 0,search:p.value||void 0},{preserveState:!0,replace:!0})}function b(t){p.value=t,u()}function x(t){u(t)}function v({action:t,row:s}){if(t==="edit"&&l.get(`/payments/${s.id}/edit`),t==="delete"){if(!confirm("¿Eliminar este pago?"))return;l.delete(`/payments/${s.id}`,{preserveScroll:!0})}}return(t,s)=>(m(),i(F,null,[c(f(C),{title:"Pagos / Ingresos"}),c(w,{breadcrumbs:y},{default:n(()=>[a("div",V,[a("div",$,[s[1]||(s[1]=a("div",null,[a("h1",{class:"text-xl font-semibold"},"Pagos / Ingresos"),a("p",{class:"text-sm text-muted-foreground"}," Registra los pagos recibidos y vincúlalos a tus ventas. ")],-1)),a("button",{class:"px-4 py-2 rounded-lg bg-primary text-white text-sm",type:"button",onClick:s[0]||(s[0]=e=>f(l).get("/payments/create"))}," + Nuevo ingreso ")]),a("div",B,[c(N,{columns:_,rows:o.payments.data,pagination:{currentPage:o.payments.current_page,lastPage:o.payments.last_page,perPage:o.payments.per_page,total:o.payments.total},actions:h,"search-placeholder":"Buscar por cliente o referencia",onFilter:b,onChangePage:x,onAction:v},{"cell-date":n(({row:e})=>[d(r(e.payment_date),1)]),"cell-customer":n(({row:e})=>[d(r(e.customer?.name||"—"),1)]),"cell-sale":n(({row:e})=>[e.sale?(m(),i("span",E,r(e.sale.series)+"-"+r(e.sale.number),1)):(m(),i("span",I," Sin venta "))]),"cell-amount":n(({row:e})=>[a("span",A," S/ "+r(Number(e.amount||0).toFixed(2)),1)]),"cell-method":n(({row:e})=>[d(r(e.method||"—"),1)]),_:1},8,["rows","pagination"])])])]),_:1})],64))}});export{J as default};
