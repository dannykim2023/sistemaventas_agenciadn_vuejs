import{d as P,r as f,m as F,M,c as n,g as i,f as s,B as N,C as S,H as $,F as c,G as p,i as b,t as d,z as k,N as z,j as x,n as V,o}from"./app-Cu1ZTOfv.js";const T={class:"border rounded-xl overflow-hidden bg-white"},j={key:0,class:"p-4 flex items-center gap-2 border-b bg-white"},E={key:0,class:"relative flex-1"},L=["placeholder"],A={class:"overflow-x-auto"},D={class:"w-full text-sm"},I={class:"bg-gray-50 border-b"},K={key:0,class:"p-3 w-10"},U={key:1,class:"p-3 w-10"},G={key:0,class:"p-3 w-10"},H={key:1,class:"p-3 text-right overflow-visible"},O={class:"relative inline-block text-left action-menu"},R=["onClick"],q={key:0,class:"absolute right-0 mt-1 bg-white border shadow-lg rounded-md z-10 min-w-[140px]"},J=["onClick"],Q={key:0},W=["colspan"],X={key:1,class:"flex items-center justify-between p-4 text-sm bg-gray-50"},Y={class:"font-semibold"},Z={class:"flex items-center gap-2"},ee=["value"],te={class:"text-gray-600"},oe=P({__name:"BaseTable",props:{columns:{},rows:{},selectable:{type:Boolean},actions:{},pagination:{},searchPlaceholder:{default:"Buscar"},showSearch:{type:Boolean,default:!0},showFilterButton:{type:Boolean,default:!0}},emits:["change-page","action","search","filter"],setup(w,{emit:_}){const t=w,g=_,h=f("");function v(){g("filter",h.value)}function y(r){const e=t.pagination?.lastPage||1;r<1||r>e||g("change-page",r)}function B(r){const e=r.target;if(!e)return;const l=Number(e.value||"1");y(l)}const u=f(null);function C(r){u.value=u.value===r?null:r}function m(r){const e=r.target;e&&(e.closest(".action-menu")||(u.value=null))}return F(()=>{window.addEventListener("click",m)}),M(()=>{window.removeEventListener("click",m)}),(r,e)=>(o(),n("div",T,[t.showSearch||t.showFilterButton?(o(),n("div",j,[t.showSearch?(o(),n("div",E,[N(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onKeyup:$(v,["enter"]),placeholder:t.searchPlaceholder,class:"w-full border rounded-lg px-10 py-2 text-sm"},null,40,L),[[S,h.value]]),e[3]||(e[3]=s("svg",{class:"w-4 h-4 absolute left-3 top-2.5 opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("circle",{cx:"11",cy:"11",r:"7","stroke-width":"2"}),s("path",{d:"m21 21-4.3-4.3","stroke-width":"2"})],-1))])):i("",!0),t.showFilterButton?(o(),n("button",{key:1,class:"px-3 py-2 rounded-lg border text-sm hover:bg-gray-50 flex items-center gap-1",onClick:v},[...e[4]||(e[4]=[s("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{d:"M4 4h16l-6 7v5l-4 2v-7z","stroke-width":"2","stroke-linejoin":"round"})],-1),s("span",null,"Filtrar",-1)])])):i("",!0)])):i("",!0),s("div",A,[s("table",D,[s("thead",I,[s("tr",null,[t.selectable?(o(),n("th",K,[...e[5]||(e[5]=[s("input",{type:"checkbox",class:"h-4 w-4"},null,-1)])])):i("",!0),(o(!0),n(c,null,p(t.columns,l=>(o(),n("th",{key:l.key,class:"p-3 text-xs font-semibold text-gray-600",style:k({textAlign:l.align||"left",width:l.width})},d(l.label),5))),128)),t.actions?.length?(o(),n("th",U)):i("",!0)])]),s("tbody",null,[(o(!0),n(c,null,p(t.rows,l=>(o(),n("tr",{key:l.id,class:"border-b hover:bg-gray-100/50 transition"},[t.selectable?(o(),n("td",G,[...e[6]||(e[6]=[s("input",{type:"checkbox",class:"h-4 w-4"},null,-1)])])):i("",!0),(o(!0),n(c,null,p(t.columns,a=>(o(),n("td",{key:a.key,class:"p-3",style:k({textAlign:a.align||"left"})},[z(r.$slots,`cell-${a.key}`,{row:l},()=>[b(d(l[a.key]),1)])],4))),128)),t.actions?.length?(o(),n("td",H,[s("div",O,[s("button",{type:"button",class:"p-1 rounded-full hover:bg-gray-100",onClick:x(a=>C(l.id),["stop"])}," ⋮ ",8,R),u.value===l.id?(o(),n("div",q,[(o(!0),n(c,null,p(t.actions,a=>(o(),n("button",{key:a.key,class:V(["w-full text-left px-3 py-2 text-sm hover:bg-gray-100",a.variant==="danger"?"text-red-600":""]),onClick:x(se=>{g("action",{action:a.key,row:l}),u.value=null},["prevent"])},d(a.label),11,J))),128))])):i("",!0)])])):i("",!0)]))),128)),t.rows.length===0?(o(),n("tr",Q,[s("td",{colspan:t.columns.length+(t.selectable?1:0)+(t.actions?.length?1:0),class:"p-6 text-center text-gray-500"}," No hay registros ",8,W)])):i("",!0)])])]),t.pagination?(o(),n("div",X,[s("div",null,[e[7]||(e[7]=b(" Ítems por página: ",-1)),s("span",Y,d(t.pagination.perPage),1)]),s("div",Z,[e[8]||(e[8]=b(" Página: ",-1)),s("input",{type:"number",value:t.pagination.currentPage,onInput:B,class:"w-16 border rounded-md px-2 py-1"},null,40,ee),s("span",te,"/ "+d(t.pagination.lastPage),1),s("button",{class:"px-2 py-1 border rounded-md hover:bg-gray-200",onClick:e[1]||(e[1]=l=>y(t.pagination.currentPage-1))}," ‹ "),s("button",{class:"px-2 py-1 border rounded-md hover:bg-gray-200",onClick:e[2]||(e[2]=l=>y(t.pagination.currentPage+1))}," › ")])])):i("",!0)]))}});export{oe as _};
