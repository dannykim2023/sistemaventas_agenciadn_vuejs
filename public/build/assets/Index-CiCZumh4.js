import{d as G,r as b,A as D,k as P,c as u,b as T,u as l,h as H,e as O,f as e,g as f,B as a,H as q,C as m,o as p,F as S,G as _,t as n,n as C,D as g,i as M,a as F}from"./app-CZGxpMu4.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-fsc1CXWY.js";import{d as Q}from"./index-C4J_hXM0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-59Mo48T7.js";import"./useForwardExpose-C9xLoNo1.js";import"./VisuallyHidden-CyaeyaAO.js";import"./RovingFocusGroup-Dongv5Iv.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-BIN8wtFf.js";const W={class:"p-4 md:p-6 space-y-4"},X={class:"flex items-center justify-between"},Y={class:"flex gap-2"},Z={class:"bg-white dark:bg-card rounded-xl shadow-sm border"},ee={class:"p-4 flex items-center gap-2"},te={class:"relative flex-1"},se={class:"overflow-x-auto"},oe={class:"w-full text-sm"},le={class:"p-3 font-medium"},de={class:"p-3"},ie={class:"p-3"},re={class:"p-3 text-right"},ne={class:"p-3"},ue={class:"p-3"},ae={key:0,class:"text-blue-700 bg-blue-50 px-2 py-1 rounded-full text-xs"},pe={key:1,class:"text-emerald-700 bg-emerald-50 px-2 py-1 rounded-full text-xs"},me={class:"p-3"},ve={class:"flex items-center gap-3"},be=["onClick"],ce=["onClick"],xe=["onClick"],fe={key:0},ge={class:"p-4 flex items-center justify-between text-sm"},ye={class:"flex items-center gap-2"},ke=["href","innerHTML"],we={key:0,class:"fixed inset-0 bg-black/40 grid place-items-center z-50"},Ce={class:"bg-white dark:bg-card w-full max-w-2xl rounded-xl shadow-2xl border p-6 space-y-5"},Ne={class:"flex items-center justify-between"},Ue={class:"grid grid-cols-3 gap-2"},Se={class:"grid md:grid-cols-2 gap-3"},Ve={class:"col-span-2"},$e=["value"],Ee=["value"],De={class:"flex items-center justify-between pt-3 border-t mt-1"},Pe={class:"flex gap-2"},Te=["disabled"],_e={key:1,class:"fixed inset-0 bg-black/30 grid place-items-center z-50"},Me={class:"bg-white dark:bg-card w-full max-w-lg rounded-xl shadow-xl border p-6 space-y-4"},Fe={class:"flex items-center justify-between"},Ke={class:"grid grid-cols-2 gap-3"},Le={class:"font-medium"},Re={class:"flex justify-end gap-2 pt-2"},je={key:2,class:"fixed inset-0 bg-black/40 grid place-items-center z-50"},Be={class:"bg-white dark:bg-card w-full max-w-2xl rounded-xl shadow-2xl border p-6 space-y-5"},he={class:"flex items-center justify-between"},ze={class:"grid md:grid-cols-2 gap-3"},Ie={class:"col-span-2"},Ae=["value"],Ge={class:"flex items-center justify-end gap-2 pt-3 border-t mt-1"},He=["disabled"],Oe={key:3,class:"fixed inset-0 bg-black/40 grid place-items-center z-50"},qe={class:"bg-white dark:bg-card w-full max-w-md rounded-xl shadow-xl border p-6 space-y-4"},Je={class:"text-sm text-muted-foreground"},Qe={class:"flex justify-end gap-2"},dt=G({__name:"Index",props:{products:{},filters:{}},setup(K){const v=K,L=[{title:"Dashboard",href:Q().url},{title:"Ítems de venta",href:"/products"}],N=b(v.filters?.search??"");function V(){F.get("/products",{search:N.value||void 0},{preserveState:!0,replace:!0})}function R(i){i.key==="Enter"&&V()}const c=b(!1),o=D({kind:"product",sku:"",name:"",unit:"UND",price:0,tax_pct:.18,is_service:!1});function U(i){o.kind=i,i==="service"?(o.is_service=!0,o.unit==="UND"&&(o.unit="SERV")):(o.is_service=!1,o.unit==="SERV"&&(o.unit="UND"))}const j=P(()=>(Number(o.price||0)*(1+Number(o.tax_pct||0))).toFixed(2));function B(){o.post("/products",{onSuccess:()=>{window.$toast?.success("Producto creado correctamente"),o.reset(),o.kind="product",o.unit="UND",o.tax_pct=.18,c.value=!1}})}const r=b(null),y=b(!1);function h(i){r.value=i,y.value=!0}const x=b(!1),d=D({id:0,sku:"",name:"",unit:"UND",price:0,tax_pct:.18,is_service:!1});function $(i){r.value=i,d.id=i.id,d.sku=i.sku||"",d.name=i.name,d.unit=i.unit,d.price=i.price,d.tax_pct=i.tax_pct,d.is_service=!!i.is_service,x.value=!0}const z=P(()=>(Number(d.price||0)*(1+Number(d.tax_pct||0))).toFixed(2));function I(){d.put(`/products/${d.id}`,{preserveScroll:!0,onSuccess:()=>{window.$toast?.success("Producto actualizado"),x.value=!1}})}const k=b(!1);function E(i){r.value=i,k.value=!0}function A(){r.value&&F.delete(`/products/${r.value.id}`,{preserveScroll:!0,onSuccess:()=>{window.$toast?.success("Producto eliminado"),k.value=!1,r.value=null}})}return(i,t)=>(p(),u(S,null,[T(l(H),{title:"Ítems de venta"}),T(J,{breadcrumbs:L},{default:O(()=>[e("div",W,[e("div",X,[t[26]||(t[26]=e("div",null,[e("h1",{class:"text-xl font-semibold"},"Ítems de venta"),e("p",{class:"text-sm text-muted-foreground"},"Crea, edita y administra tus productos y servicios.")],-1)),e("div",Y,[t[25]||(t[25]=e("button",{class:"px-3 py-2 rounded-lg border hover:bg-muted/40"},"Más acciones",-1)),e("button",{class:"px-4 py-2 rounded-lg bg-primary text-white",onClick:t[0]||(t[0]=s=>c.value=!0)}," + Nuevo ítem de venta ")])]),e("div",Z,[e("div",ee,[e("div",te,[a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>N.value=s),onKeyup:q(R,["enter"]),placeholder:"Buscar producto/servicio…",class:"w-full border rounded-lg px-10 py-2 dark:bg-background"},null,544),[[m,N.value]]),t[27]||(t[27]=e("svg",{class:"w-5 h-5 absolute left-3 top-2.5 opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"11",cy:"11",r:"7","stroke-width":"2"}),e("path",{d:"m21 21-4.3-4.3","stroke-width":"2"})],-1))]),e("button",{class:"px-3 py-2 rounded-lg border hover:bg-muted/40",onClick:V},"Filtrar")]),e("div",se,[e("table",oe,[t[29]||(t[29]=e("thead",{class:"text-muted-foreground border-y bg-muted/40"},[e("tr",null,[e("th",{class:"p-3 text-left"},"Nombre"),e("th",{class:"p-3 text-left"},"SKU"),e("th",{class:"p-3 text-left"},"Unidad"),e("th",{class:"p-3 text-right"},"Precio base"),e("th",{class:"p-3 text-left"},"Impuesto"),e("th",{class:"p-3 text-left"},"Tipo"),e("th",{class:"p-3 text-left"},"Acciones")])],-1)),e("tbody",null,[(p(!0),u(S,null,_(v.products.data,s=>(p(),u("tr",{key:s.id,class:"border-b hover:bg-muted/30"},[e("td",le,n(s.name),1),e("td",de,n(s.sku||"—"),1),e("td",ie,n(s.unit),1),e("td",re,"S/ "+n(Number(s.price).toFixed(2)),1),e("td",ne,n((Number(s.tax_pct)*100).toFixed(0))+"%",1),e("td",ue,[s.is_service?(p(),u("span",ae,"Servicio")):(p(),u("span",pe,"Producto"))]),e("td",me,[e("div",ve,[e("button",{class:"underline opacity-90 hover:opacity-100",onClick:w=>h(s)},"Ver",8,be),e("button",{class:"underline opacity-90 hover:opacity-100",onClick:w=>$(s)},"Editar",8,ce),e("button",{class:"text-red-600 opacity-90 hover:opacity-100",onClick:w=>E(s)},"Eliminar",8,xe)])])]))),128)),v.products.data.length===0?(p(),u("tr",fe,[...t[28]||(t[28]=[e("td",{colspan:"7",class:"p-6 text-center text-muted-foreground"},"No hay ítems",-1)])])):f("",!0)])])]),e("div",ge,[e("div",null,"Mostrando "+n(v.products.data.length)+" de "+n(v.products.total),1),e("div",ye,[(p(!0),u(S,null,_(v.products.links,(s,w)=>(p(),u("a",{key:w,href:s.url||"#",class:C(["px-3 py-1.5 rounded border",s.active?"bg-primary text-white border-primary":"hover:bg-muted/40"]),innerHTML:s.label},null,10,ke))),128))])])])]),c.value?(p(),u("div",we,[e("div",Ce,[e("div",Ne,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold"},"Formulario básico de productos",-1)),e("button",{class:"opacity-70 hover:opacity-100",onClick:t[2]||(t[2]=s=>c.value=!1)},[...t[30]||(t[30]=[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"},[e("path",{"stroke-width":"2",d:"M6 6l12 12M6 18L18 6"})],-1)])])]),e("div",Ue,[e("button",{class:C([l(o).kind==="product"?"bg-primary/10 border-primary text-primary":"hover:bg-muted/40","px-4 py-2 rounded-lg border font-medium"]),onClick:t[3]||(t[3]=s=>U("product"))},"Producto",2),e("button",{class:C([l(o).kind==="service"?"bg-primary/10 border-primary text-primary":"hover:bg-muted/40","px-4 py-2 rounded-lg border font-medium"]),onClick:t[4]||(t[4]=s=>U("service"))},"Servicio",2),e("button",{class:C([l(o).kind==="combo"?"bg-primary/10 border-primary text-primary":"hover:bg-muted/40","px-4 py-2 rounded-lg border font-medium"]),onClick:t[5]||(t[5]=s=>U("combo")),title:"Visual; guarda como producto"},"Combo",2)]),e("div",Se,[e("div",Ve,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium mb-1"},"Nombre *",-1)),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).name=s),class:"w-full border rounded-lg px-3 py-2"},null,512),[[m,l(o).name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium mb-1"},"Unidad *",-1)),a(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).unit=s),class:"w-full border rounded-lg px-2 py-2"},[...t[33]||(t[33]=[e("option",{value:"UND"},"UND",-1),e("option",{value:"SERV"},"SERV",-1),e("option",{value:"HORA"},"HORA",-1),e("option",{value:"KG"},"KG",-1),e("option",{value:"LT"},"LT",-1)])],512),[[g,l(o).unit]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium mb-1"},"SKU",-1)),a(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l(o).sku=s),class:"w-full border rounded-lg px-3 py-2",placeholder:"Opcional"},null,512),[[m,l(o).sku]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium mb-1"},"Precio base *",-1)),a(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[9]||(t[9]=s=>l(o).price=s),class:"w-full border rounded-lg px-3 py-2"},null,512),[[m,l(o).price,void 0,{number:!0}]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium mb-1"},"Impuesto",-1)),a(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>l(o).tax_pct=s),class:"w-full border rounded-lg px-2 py-2"},[...t[37]||(t[37]=[e("option",{value:0},"Ninguno (0%)",-1),e("option",{value:.18},"IGV 18%",-1)])],512),[[g,l(o).tax_pct,void 0,{number:!0}]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium mb-1"},"Precio total (preview)",-1)),e("input",{value:`S/ ${j.value}`,class:"w-full border rounded-lg px-3 py-2 bg-muted/40",disabled:""},null,8,$e)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium mb-1"},"Tipo guardado",-1)),e("input",{value:l(o).is_service?"Servicio":"Producto",class:"w-full border rounded-lg px-3 py-2 bg-muted/40",disabled:""},null,8,Ee)])]),e("div",De,[t[41]||(t[41]=e("button",{class:"text-sm underline opacity-80 hover:opacity-100"},"Ir al formulario avanzado",-1)),e("div",Pe,[e("button",{class:"px-3 py-2 rounded border",onClick:t[11]||(t[11]=s=>c.value=!1)},"Cancelar"),e("button",{class:"px-4 py-2 rounded bg-primary text-white",disabled:l(o).processing,onClick:B},"Crear producto",8,Te)])])])])):f("",!0),y.value&&r.value?(p(),u("div",_e,[e("div",Me,[e("div",Fe,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold"},"Detalle del ítem",-1)),e("button",{class:"opacity-70 hover:opacity-100",onClick:t[12]||(t[12]=s=>y.value=!1)},[...t[42]||(t[42]=[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"},[e("path",{"stroke-width":"2",d:"M6 6l12 12M6 18L18 6"})],-1)])])]),e("div",Ke,[e("div",null,[t[44]||(t[44]=e("div",{class:"text-xs text-muted-foreground"},"Nombre",-1)),e("div",Le,n(r.value.name),1)]),e("div",null,[t[45]||(t[45]=e("div",{class:"text-xs text-muted-foreground"},"SKU",-1)),e("div",null,n(r.value.sku||"—"),1)]),e("div",null,[t[46]||(t[46]=e("div",{class:"text-xs text-muted-foreground"},"Unidad",-1)),e("div",null,n(r.value.unit),1)]),e("div",null,[t[47]||(t[47]=e("div",{class:"text-xs text-muted-foreground"},"Impuesto",-1)),e("div",null,n((Number(r.value.tax_pct)*100).toFixed(0))+"%",1)]),e("div",null,[t[48]||(t[48]=e("div",{class:"text-xs text-muted-foreground"},"Precio base",-1)),e("div",null,"S/ "+n(Number(r.value.price).toFixed(2)),1)]),e("div",null,[t[49]||(t[49]=e("div",{class:"text-xs text-muted-foreground"},"Tipo",-1)),e("div",null,n(r.value.is_service?"Servicio":"Producto"),1)])]),e("div",Re,[e("button",{class:"px-3 py-2 rounded border",onClick:t[13]||(t[13]=s=>y.value=!1)},"Cerrar"),e("button",{class:"px-3 py-2 rounded border",onClick:t[14]||(t[14]=s=>$(r.value))},"Editar"),e("button",{class:"px-3 py-2 rounded bg-red-600 text-white",onClick:t[15]||(t[15]=s=>E(r.value))},"Eliminar")])])])):f("",!0),x.value?(p(),u("div",je,[e("div",Be,[e("div",he,[t[51]||(t[51]=e("h3",{class:"text-lg font-semibold"},"Editar producto",-1)),e("button",{class:"opacity-70 hover:opacity-100",onClick:t[16]||(t[16]=s=>x.value=!1)},[...t[50]||(t[50]=[e("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"},[e("path",{"stroke-width":"2",d:"M6 6l12 12M6 18L18 6"})],-1)])])]),e("div",ze,[e("div",Ie,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium mb-1"},"Nombre *",-1)),a(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l(d).name=s),class:"w-full border rounded-lg px-3 py-2"},null,512),[[m,l(d).name]])]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium mb-1"},"Unidad *",-1)),a(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>l(d).unit=s),class:"w-full border rounded-lg px-2 py-2"},[...t[53]||(t[53]=[e("option",{value:"UND"},"UND",-1),e("option",{value:"SERV"},"SERV",-1),e("option",{value:"HORA"},"HORA",-1),e("option",{value:"KG"},"KG",-1),e("option",{value:"LT"},"LT",-1)])],512),[[g,l(d).unit]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium mb-1"},"SKU",-1)),a(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>l(d).sku=s),class:"w-full border rounded-lg px-3 py-2"},null,512),[[m,l(d).sku]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium mb-1"},"Precio base *",-1)),a(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[20]||(t[20]=s=>l(d).price=s),class:"w-full border rounded-lg px-3 py-2"},null,512),[[m,l(d).price,void 0,{number:!0}]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium mb-1"},"Impuesto",-1)),a(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>l(d).tax_pct=s),class:"w-full border rounded-lg px-2 py-2"},[...t[57]||(t[57]=[e("option",{value:0},"Ninguno (0%)",-1),e("option",{value:.18},"IGV 18%",-1)])],512),[[g,l(d).tax_pct,void 0,{number:!0}]])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium mb-1"},"Precio total (preview)",-1)),e("input",{value:`S/ ${z.value}`,class:"w-full border rounded-lg px-3 py-2 bg-muted/40",disabled:""},null,8,Ae)]),e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium mb-1"},"Tipo guardado",-1)),a(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>l(d).is_service=s),class:"w-full border rounded-lg px-2 py-2"},[...t[60]||(t[60]=[e("option",{value:!1},"Producto",-1),e("option",{value:!0},"Servicio",-1)])],512),[[g,l(d).is_service]])])]),e("div",Ge,[e("button",{class:"px-3 py-2 rounded border",onClick:t[23]||(t[23]=s=>x.value=!1)},"Cancelar"),e("button",{class:"px-4 py-2 rounded bg-primary text-white",disabled:l(d).processing,onClick:I},"Actualizar",8,He)])])])):f("",!0),k.value?(p(),u("div",Oe,[e("div",qe,[t[64]||(t[64]=e("h3",{class:"text-lg font-semibold"},"Eliminar ítem",-1)),e("p",Je,[t[62]||(t[62]=M(" ¿Seguro que deseas eliminar ",-1)),e("b",null,n(r.value?.name),1),t[63]||(t[63]=M("? Esta acción no se puede deshacer. ",-1))]),e("div",Qe,[e("button",{class:"px-3 py-2 rounded border",onClick:t[24]||(t[24]=s=>k.value=!1)},"Cancelar"),e("button",{class:"px-4 py-2 rounded bg-red-600 text-white",onClick:A},"Eliminar")])])])):f("",!0)]),_:1})],64))}});export{dt as default};
